戦闘システム実装チェックリスト（v1.1 - 統合版）
【優先度：最重要】コアシステムの基盤

戦闘を成立させるための最低限のデータと構造。

    [ ] データ管理 (Data Management)

        [ ] 1. CSVファイルの作成:

            [ ] a. parts.csv: 「データ構造 - Final」で定義した全16列のCSVを作成する。

            [ ] b. medals.csv: 「データ構造 - Final」で定義した全7列のCSVを作成する。（AIのターゲッティングを後回しにするなら、idとmedal_nameだけでもOK）

        [ ] 2. データ構造の定義 (Go struct):

            [ ] a. Part構造体: parts.csvの1行に対応するstructを定義。

            [ ] b. Medal構造体: medals.csvの1行に対応するstructを定義。

        [ ] 3. CSVローダーの実装:

            [ ] a. パーツ読み込み: ゲーム起動時にparts.csvを読み込み、map[string]Partなどの形で全パーツデータを保持する。

            [ ] b. メダル読み込み: ゲーム起動時にmedals.csvを読み込み、map[string]Medalなどの形で全メダルデータを保持する。

    [ ] 機体構成 (Robot Structure)

        [ ] 1. Robot構造体の定義: 5つのPartID（頭・両腕・脚・メダル）と、チーム、リーダーフラグ、現在の各部位HPなどを保持する。

        [ ] 2. 機体生成: パーツIDの組み合わせから、Robotインスタンスを生成する機能。

【優先度：高】戦闘ロジックの中核

実際の攻防を成立させるための計算ロジック。

    [ ] 戦闘計算式 (Combat Formulas)

        [ ] 1. 時間計算:

            [ ] a. チャージ時間: 500 / (充填 + 推進 * 0.5) の計算式を実装。

            [ ] b. クールダウン時間: 500 / (冷却 + 推進 * 0.5) の計算式を実装。

        [ ] 2. 命中/回避/クリティカル計算:

            [ ] a. action_traitの読み取り: 選択したパーツのaction_traitを読み取る。

            [ ] b. 技・特性補正の適用: action_traitに応じて、狙い撃ち(+50)や殴る(+20)などの補正値を決定する。

            [ ] c. 最終計算値: 75 + 命中 - 機動 + 技補正 の計算式を実装。

            [ ] d. 判定ロジック: 最終計算値に基づき、「回避」「命中」「命中確定＆クリティカル」の3パターンに分岐させる。

        [ ] 3. ダメージ計算:

            [ ] a. 我武者羅の威力ボーナス: action_traitがBERSERKの場合、脚部の推進パラメータを威力に加算する。

            [ ] b. 威力 - 耐久: (威力 - (被弾パーツ耐久 + 脚部耐久)) の計算式を実装。

            [ ] c. クリティカル補正: クリティカル時にダメージを2倍にする。

            [ ] d. 最低保証ダメージ: 最終ダメージが1未満の場合、1に切り上げる。

    [ ] 行動の制約 (Action Traits)

        [ ] 1. 制約の適用: action_traitがAIM, STRIKE, BERSERKのいずれかの場合、対応する制約を機体に付与する。

        [ ] 2. 「回避不能」の実装: 制約中、命中計算で自身の「機動」を0として扱う。

        [ ] 3. 「防御不能」の実装: 制約中、ダメージ計算で自身の「耐久」を0として扱う。

【優先度：中】ゲームループの形成

1回の戦闘を「ゲーム」として成立させるための流れ。

    [ ] 戦闘シーケンス (Battle Sequence)

        [ ] 1. 戦闘開始処理:

            [ ] a. メンバー配置: 味方・敵をフィールドに配置。

            [ ] b. 初期行動選択: プレイヤーが3機分の行動を予約できるUIとロジック。

        [ ] 2. タイムライン管理:

            [ ] a. ゲージ進行: 各機体のチャージ/クールダウンゲージを時間経過で進める。

            [ ] b. 行動実行: チャージ完了した機体から順に行動を実行させる。

        [ ] 3. 勝利/敗北判定:

            [ ] a. 勝利条件: 敵リーダー機の頭部装甲が0になったかを監視。

            [ ] b. 敗北条件: 味方リーダー機の頭部装甲が0になったかを監視。

    [ ] 報酬と再挑戦 (Rewards & Retry)

        [ ] 1. 勝利時リザルト:

            [ ] a. 熟練度加算: （まずは固定値でOK）参加メダルに熟練度を加算する。

            [ ] b. パーツドロップ: 敵の装備パーツから、drop_rateに基づきランダムでドロップさせる。

        [ ] 2. 敗北時処理:

            [ ] a. ペナルティなし: 敗北時のデメリットは無しとする。

            [ ] b. 再挑戦: 「再挑戦」オプションを選択すると、戦闘がリスタートする。

【優先度：低】追加・拡張要素

コアシステムが完成した後に着手する要素。

    [ ] AIの高度化

        [ ] 1. 性格（ターゲッティング）: medals.csvのpersonalityに基づき、狙う相手を変えるロジック。

    [ ] 情報表示 (UI/UX)

        [ ] 1. リーダー機識別: 「索敵」や「頭部ヒット」でリーダー機を判明させるロジックと表示。

    [ ] メダルシステムの詳細化

        [ ] 1. 相性・熟練度ボーナス: メダルの性能を戦闘計算式に反映させる（威力ボーナスなど）。

        [ ] 2. セーブデータ連携: プレイヤーごとのメダルのレベルや熟練度をセーブ/ロードする機能。
